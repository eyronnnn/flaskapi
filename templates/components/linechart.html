<div class="flex justify-start mt-10 ml-[100px]">
  <div
    class="w-[800px] bg-gradient-to-r from-[#1a1a1a] to-[#2a2a2a] p-5 rounded-lg shadow-lg shadow-gray-300 transition-transform duration-500 hover:shadow-xl hover:scale-105"
  >
    <h2 class="text-white text-2xl font-semibold mb-5">Monthly Fresh and Not Fresh Scanned</h2>
    <canvas id="lineChart" style="width: 100%; height: 300px"></canvas>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Inject data dynamically as JSON in a hidden script -->
<script type="application/json" id="chart-data">
  {{ data | tojson | safe }}
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const ctx = document.getElementById("lineChart").getContext("2d");

    const dynamicData = JSON.parse(document.getElementById("chart-data").textContent);

    const data = {
      labels: dynamicData.labels,
      datasets: [
        {
          label: "Fresh",
          data: dynamicData.fresh,
          borderColor: "#23a939",
          backgroundColor: "rgba(35, 169, 57, 0.2)",
          tension: 0.4,
          borderWidth: 2,
        },
        {
          label: "Not Fresh",
          data: dynamicData.not_fresh,
          borderColor: "#cf4452",
          backgroundColor: "rgba(207, 68, 82, 0.2)",
          tension: 0.4,
          borderWidth: 2,
        },
      ],
    };

    const config = {
      type: "line",
      data: data,
      options: {
        responsive: true,
        animation: {
          duration: 2000, // Animation duration in milliseconds
          easing: "easeInOutSine", // Smooth animation
          loop: false,
        },
        plugins: {
          legend: {
            labels: {
              color: "white",
              font: {
                size: 18,
                weight: "bold",
              },
            },
          },
        },
        scales: {
          x: {
            ticks: {
              color: "white",
            },
          },
          y: {
            ticks: {
              color: "white",
            },
          },
        },
        animations: {
          tension: {
            duration: 1000, // Adjust tension duration
            easing: "easeInOutElastic", // Snake-like effect
            from: 0.5,
            to: 0,
            loop: true, // Can keep looping for smooth "snake" feel
          },
        },
      },
    };

    new Chart(ctx, config);
  });
</script>
